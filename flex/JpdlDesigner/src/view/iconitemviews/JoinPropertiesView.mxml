<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" title="结点属性" show="onCreationComplete();" creationComplete="{onCreationComplete();}" initialize="init();" showCloseButton="true" close="closeMyself();" layout="absolute" width="680" >
	<mx:Script>
		<![CDATA[
			import mx.core.Application;
			import view.iconitemviews.propertiesFiled.Transition;
			import components.ArrowLine;
			import mx.collections.ArrayCollection;
			import components.icons.JoinIcon;
			import mx.managers.PopUpManager; 
			private function closeMyself():void{
				PopUpManager.removePopUp(this);
			}
			
			private var _joinIcon:JoinIcon;
			private var transitionArray:ArrayCollection = new ArrayCollection();
			
			private function init():void{
				
			}
			
			public function set joinIcon(v:JoinIcon):void{
				this._joinIcon = v;
			}
			
			private function onCreationComplete():void{
				discriminatorCheckBox.selected = _joinIcon.discriminator;
				propertiesContext.removeAllChildren();
				transitionArray.removeAll();
				for each(var line:ArrowLine in _joinIcon.outLines){
					var transition:Transition = new Transition();
					transition.line = line;
					propertiesContext.addChild(transition);
					transitionArray.addItem(transition);
				}
			}
			
			private function saveProperties():void{
				for each(var transition:Transition in transitionArray){
					transition.save();
				}
				this._joinIcon.discriminator = discriminatorCheckBox.selected;
				
				Application.application.reDrawIconAll();
				closeMyself();
			}
		]]>
	</mx:Script>
	<mx:VBox width="100%" height="100%">
		<mx:HBox>
			<mx:Label/>
		</mx:HBox>
		<mx:HBox id="propertiesContextInit" width="100%">
			<mx:Label text="全部进入结点" width="89" textAlign="right" fontWeight="bold"/>
			<mx:CheckBox id="discriminatorCheckBox" label="选定表示全部分支进入后才住下走" selected="false"/>
		</mx:HBox>
		<mx:VBox id="propertiesContext" width="100%">
		</mx:VBox>
		<mx:HBox>
			<mx:Label/>
		</mx:HBox>
		<mx:HBox width="100%" height="50" horizontalAlign="center">
			<mx:Button label="保存" click="saveProperties();"/>
			<mx:Button label="关闭" click="closeMyself();"/>
		</mx:HBox>
	</mx:VBox>
</mx:TitleWindow>
